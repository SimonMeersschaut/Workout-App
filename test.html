<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .draggable {
            width: 100px;
            height: 50px;
            background-color: lightblue;
            margin: 10px;
            cursor: grab;
            position: absolute;
        }
    </style>
</head>
<body>

<div class="draggable">
    Drag me 1
</div>
<div class="draggable">
    Drag me 2
</div>
<div class="draggable">
    Drag me 3
</div>

<script>
    let offsetX, offsetY;
    let isDragging = false;

    document.addEventListener('mousedown', startDrag);

    function startDrag(e) {
        if (e.target.classList.contains('draggable')) {
            const draggableElement = e.target;

            // Store the initial position of the mouse pointer relative to the draggable element
            offsetX = e.clientX - draggableElement.getBoundingClientRect().left;
            offsetY = e.clientY - draggableElement.getBoundingClientRect().top;

            // Set the flag to indicate dragging has started
            isDragging = true;

            // Attach the drag and mouseup event listeners
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
        }
    }

    function drag(e) {
        if (isDragging) {
            // Calculate the new horizontal position of the dragged element
            const newX = e.clientX - offsetX;

            // Set the new horizontal position while keeping the vertical position constant
            document.querySelectorAll('.draggable').forEach(draggableElement => {
                draggableElement.style.left = `${newX}px`;
            });
        }
    }

    function stopDrag() {
        // Reset the offset values and flag
        offsetX = 0;
        offsetY = 0;
        isDragging = false;

        // Remove the event listeners when dragging stops
        document.removeEventListener('mousemove', drag);
        document.removeEventListener('mouseup', stopDrag);
    }
</script>

</body>
</html>
